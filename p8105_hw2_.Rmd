---
title: "p8105_hw2_mgw2144"
output: github_document
date: "2023-09-27"
---

```{r}
library(tidyverse)
library(here)
rm(list=ls())
project.folder=
  paste0(print(here::here()),'/')
```

Problem 1

```{r}
pols_month_df =
  read.csv(paste0(project.folder,"/data/pols-month.csv")) %>% 
  janitor::clean_names()%>% 
  separate(mon, into = c("year", "month", "day")) %>% 
  mutate(
    month = replace(month, month == "01", "jan"),
    month = replace(month, month == "02", "feb"),
    month = replace(month, month == "03", "mar"),
    month = replace(month, month == "04", "apr"),
    month = replace(month, month == "05", "may"),
    month = replace(month, month == "06", "jun"),
    month = replace(month, month == "07", "jul"),
    month = replace(month, month == "08", "aug"),
    month = replace(month, month == "09", "sep"),
    month = replace(month, month == "10", "oct"),
    month = replace(month, month == "11", "nov"),
    month = replace(month, month == "12", "dec")
  ) %>% 
  mutate(president = if_else(prez_gop ==1, "gop", "dem")) %>% 
   select(-day, -prez_gop, -prez_dem)
```

```{r}
snp_df = 
 read.csv(paste0(project.folder,"/data/snp.csv")) %>% 
  janitor::clean_names() %>% 
  separate(date, into = c("month", "day", "year")) %>% 
  mutate(
    month = replace(month, month == "1", "jan"),
    month = replace(month, month == "2", "feb"),
    month = replace(month, month == "3", "mar"),
    month = replace(month, month == "4", "apr"),
    month = replace(month, month == "5", "may"),
    month = replace(month, month == "6", "jun"),
    month = replace(month, month == "7", "jul"),
    month = replace(month, month == "8", "aug"),
    month = replace(month, month == "9", "sep"),
    month = replace(month, month == "10", "oct"),
    month = replace(month, month == "11", "nov"),
    month = replace(month, month == "12", "dec")
  ) %>% 
  select(-day) %>% 
  relocate(year, month)
```
```{r}
unemployment_df = 
 read.csv(paste0(project.folder,"/data/unemployment.csv")) %>% 
  janitor::clean_names() %>% 
  pivot_longer(
    jan:dec,
    names_to = "month",
    values_to = "percent_unemployed"
  )
```

merge step 

```{r}
pols_snp_merge=
  left_join(pols_month_df, snp_df, by = "year")
```

#### 
will come backt to this
####

Problem 2 
```{r}
mr_trash_wheel=
  readxl::read_excel(paste0(project.folder,"/data/202309 Trash Wheel Collection Data.xlsx"), sheet = 1, range = "A2:N586") %>%
  janitor::clean_names() %>% 
  mutate(
    homes_powered=((weight_tons*500)/1000),
    year = as.integer(year),
    trash_data = "mr_tw")%>% 
  relocate(trash_data)
```

```{r}
professor_trash_wheel=
  readxl::read_excel(paste0(project.folder,"/data/202309 Trash Wheel Collection Data.xlsx"), sheet=2, range = "A2:M108") %>% 
  janitor::clean_names() %>% 
  mutate(homes_powered=(
    (weight_tons*500)/1000),
    year = as.integer(year),
    trash_data = "professor_tw")%>% 
  relocate(trash_data)
```

```{r}
gwynnda_trash_wheel=
  readxl::read_excel(paste0(project.folder,"/data/202309 Trash Wheel Collection Data.xlsx"), sheet=4, range = "A2:L157") %>% 
  janitor::clean_names() %>% 
  mutate(homes_powered=(
    (weight_tons*500)/1000), 
    year = as.integer(year), 
    trash_data = "gwynnda_tw")%>% 
  relocate(trash_data)

gwynnda_july_2021=
  gwynnda_trash_wheel %>% 
  filter(month == "July") %>% 
  filter(year == "2021")
```

```{r}
trash_wheel_total=
  bind_rows(mr_trash_wheel, professor_trash_wheel, gwynnda_trash_wheel) %>%
  janitor::clean_names()
```

The collection of Mr. Trash Wheel datasets records information of a water-wheel vessel tht removed trash from the Inner Harbor in Baltimore, Maryland. The combined dataset created above contains information from the Mr. Trash Wheel, Professor Trash Wheel, and Gywnnda Trash Wheel datasets with a total of `r nrow(trash_wheel_total)` observations. The total weight of trash collected by Professor Trash Wheel was `r sum(pull(professor_trash_wheel, weight_tons))` tons. The total number of cigarette butts collected by Gwynnda in July of 2021 is `r sum(pull(gwynnda_july_2021, cigarette_butts))`.

Problem 3

```{r}
mci_baseline=
  read.csv(paste0(project.folder,"/data/MCI_baseline.csv"), skip = 1) %>% 
  janitor::clean_names() %>% 
  mutate(sex = recode(sex, `1` = "male", `0`="female")) %>% 
  mutate(apoe4 = recode(apoe4, `1`="carrier", `0`="non-carrier")) %>% 
  filter(age_at_onset != ".") 

mci_apoe_c=
  mci_baseline %>% 
  filter(sex == "female") %>% 
  filter(apoe4 == "carrier") %>% 
  mutate(apoe4 = recode(apoe4, "carrier" = 1))
  
mci_apoe_nc=
  mci_baseline %>% 
  filter(sex == "female") %>% 
  filter(apoe4 == "non-carrier") %>% 
   mutate(apoe4 = recode(apoe4, "non-carrier" = 1))
```

Important steps in the import process include utilizing the read.csv() function to import the data so that it can be cleaned and manipulated. Important features of the dataset include patient ID number, sex, APOE4 gene carrier status, and age of MCI onset for participants. There were originally 483 participants recruited and `r nrow(mci_baseline)` of these participants developed MCI. The average baseline age is `r mean(pull(mci_baseline, current_age))` years old. `r (((sum(pull(mci_apoe_c, apoe4)))/((sum(pull(mci_apoe_nc, apoe4)))+(sum(pull(mci_apoe_c, apoe4)))))*100)` percent of women in the study are APOE4 carriers. 

```{r}
mci_amyloid=
  read.csv(paste0(project.folder,"/data/mci_amyloid.csv"), skip = 1) %>% 
  janitor::clean_names() %>% 
  mutate(
    baseline = recode(baseline, Na = "NA"),
    time_2 = recode(time_2, Na = "NA"),
    time_4 = recode(time_4, Na = "NA"),
    time_6 = recode(time_6, Na = "NA"),
    time_8 = recode(time_8, Na = "NA")) %>% 
  filter(
    !is.na(baseline),
    !is.na(time_2),
    !is.na(time_4),
    !is.na(time_6),
    !is.na(time_8))
```

